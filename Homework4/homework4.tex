\documentclass[letterpaper,11pt]{article}

\usepackage[paper=letterpaper,margin=1in]{geometry}


%% minimal example of some latex stuff

\usepackage{xspace,graphicx,amsmath,amsthm,amssymb,xcolor}


\newtheorem{theorem}{Theorem}

%% code boxes

\usepackage{varwidth}
\newcommand{\fcodebox}[1]{%
    \framebox{\codebox{#1}}%
}
\newcommand{\codebox}[1]{%
        \begin{varwidth}{\linewidth}%
        \begin{tabbing}%
            ~~~\=\quad\=\quad\=\quad\=\quad\=\quad\=\kill
            #1
        \end{tabbing}%
        \end{varwidth}%
}

%% complexity classes

\newcommand{\cc}[1]{\ensuremath{\textsf{#1}}\xspace}
\renewcommand{\P}{\cc{P}}
\newcommand{\NP}{\cc{NP}}
\newcommand{\EXP}{\cc{EXP}}
\newcommand{\coNP}{\cc{coNP}}
\renewcommand{\L}{\cc{L}}
\newcommand{\NL}{\cc{NL}}
\newcommand{\PH}{\cc{PH}}
\newcommand{\PSPACE}{\cc{PSPACE}}
\newcommand{\Ppoly}{\cc{P/poly}}
\newcommand{\ZPP}{\cc{ZPP}}
\newcommand{\BPP}{\cc{BPP}}
\newcommand{\RP}{\cc{RP}}
\newcommand{\sharpP}{\cc{$\sharp$P}}
\newcommand{\AM}{\cc{AM}}
\newcommand{\MA}{\cc{MA}}
\newcommand{\IP}{\cc{IP}}


\newcommand{\DTIME}{\cc{DTIME}}
\newcommand{\NTIME}{\cc{NTIME}}
\newcommand{\DSPACE}{\cc{DSPACE}}
\newcommand{\NSPACE}{\cc{NSPACE}}
\newcommand{\SIZE}{\cc{SIZE}}


\newcommand{\karp}{\le_{\textsf{P}}}

%% decision problems

\newcommand{\prob}[1]{\ensuremath{\textsc{#1}}\xspace}
\newcommand{\SAT}{\prob{sat}}
\newcommand{\ThreeSAT}{\prob{3sat}}

%% homework templates

\newcounter{problem}
\newcounter{subproblem}[problem]

\newenvironment{problem}%
{%
	\stepcounter{problem}%
	\textbf{\theproblem.}
	\large
}{\\}%

\newenvironment{subproblem}%
{%
	\stepcounter{subproblem}%
	\textbf{\alph{subproblem})}
	\large
}{\\}%

%%%%

\newcommand{\tm}{Turing Machine}
\newcommand{\beq}{\begin{equation}}
\newcommand{\eeq}{\end{equation}}

%%%%

\newcommand{\red}{\color{red}}

\title{Homework 4}
\author{Caius Brindescu}

\begin{document}

\maketitle

\begin{problem}
	Extend Ladner's theorem:
\end{problem}

\begin{subproblem}
Prove that if $\P \ne \NP$ then there exist languages $L_1, L_2 \in \NP$ such that $L_1 \not\karp L_2$ and $L_2 \not\karp L_1$.

{\em Hint:} Adapt the proof of Ladner's theorem and arrange so that $L_1 \cap L_2 = \emptyset$ and $L_1 \cup L_2 = \ThreeSAT$. In other words, long segments of \ThreeSAT are placed into  $L_1$ and $L_2$ in an alternating fashion.
\end{subproblem}

%%%%%%%%
\begin{proof}
I will start by adapting the proof Ladner's theorem. 
I will create two Languages $L_1$, and $L_2$, that can decided by the nondeterminisic \tm{} $M_{1}$, and $M_2$, respectively:

\fcodebox{
\underline{$M_1$, on input x:} \\
\> do (deterministically) for a total of $|x|$ steps: \\
\> \> for every deterministic $\P$ time \tm{} $M$ do: \\
\> \> $on := false$ \\
\> \> iterate through all strings $y$ until $[y \in \ThreeSAT] \not \Leftrightarrow [M(y) \in L_1(M_1)]$ \\
\> \> $on := true$ \\
1: \> if $on$ then run $\NP$ algorithm for $\ThreeSAT$ \\
\> else return $false$
}

\fcodebox{
\underline{$M_2$, on input x:} \\
\> do (deterministically) for a total of $|x|$ steps: \\
\> \> for every deterministic $\P$ time \tm{} $M$ do: \\
\> \> $on := false$ \\
\> \> iterate through all strings $y$ until $[y \in \ThreeSAT] \not \Leftrightarrow [M(y) \in L_2(M_2)]$ \\
\> \> $on := true$ \\
2: \> if \textcolor{red}{$\neg on$} then run $\NP$ algorithm for $\ThreeSAT$ \\
\> else return $false$
}

The difference between lines (1) and (2) is that the $on$ condition is negated (highlighted in red).
This means that $L_1$ and $L_2$ will return complementary languages.
Therefore $L_1 \cap L_2 = \emptyset$ an $L_1 \cup L_2 = \ThreeSAT$.

Since these machines are derived from the proof for Ladner's theorem, I know that the $on$ switch will toggle infinitely. 
So, $L_1 \in \NP$ and $L_2 \in \NP$.

Therefore $L_1 \not \karp L_2$.
\end{proof}

\begin{subproblem}
Show that if $\P \ne \NP$ then there exist infinitely many languages $L_1, L_2, \ldots \in \NP$ such that $L_i \not\karp L_j$ for all $i \ne j$.
\end{subproblem}

%%%%%%%%%%%%%%
\begin{proof}
To prove this, I will use the languages defined at point a).
I will show that I can generate an infinite number of languages $L_1^i$ such that $L_1^i \karp L_1$ and infinite number of languages $L_2^i$ such that $L_2^i \karp L_2$.
Since $L_1 \karp L_2 \Rightarrow L_1^i \not \karp L_2^i, \forall i$.

Let $A$ be a problem in $\NP$.
I will use the \tm{} $M_1$ defined at point a) as a base for defining the \tm{} $M_1^*$.
Since $\ThreeSAT$ is $\NP$-complete, then $A \karp \ThreeSAT$, which means that $\exists f : x \in A \Leftrightarrow f(x) \in \ThreeSAT$.

\fcodebox{
\underline{$M_1^*$, on input x:} \\
\> {\red construct $x' = f(x)$} \\
\> do (deterministically) for a total of \textcolor{red}{$|x'|$} steps: \\
\> \> for every deterministic $\P$ time \tm{} $M$ do: \\
\> \> $on := false$ \\
\> \> iterate through all strings $y$ until $[y \in \ThreeSAT] \not \Leftrightarrow [M(y) \in L_1^*(M_1^*)]$ \\
\> \> $on := true$ \\
1: \> if $on$ then run $\NP$ algorithm for \textcolor{red}{$A$ on input x} \\
\> else return $false$
}

The difference from $M_1$ is highlighted in red.
I can calculate $f(x)$ in polynomial time, because of the definition of the Karp reduction.
Instead of running the algorithm for $\ThreeSAT$, I am now running the algorithm for $A$.
Therefore, I will get a language that is always rejects some outputs and for the others it accepts if $A$ accepts.
Since this is adapted from Ladner's proof, I know that this will give me a language that is in $\NP$.
The same arguments will apply, since I am only changing the action performed in the last condition.

I now have to show that $L_1^i \karp L_1, \forall i$. 
This follows from the fact that $A \karp \ThreeSAT$.
For both machines ($L_1$ and $L_1^*$), the switch $on$ will toggle for the same $x$.
Therefore $L_1^*$ will accept iff $L_1$ accepts (again, because $A \karp \ThreeSAT$).

I can build an infinity of these machines, by substituting $A$ for any problem in $\NP$.
This allows me to build an infinity of languages, $L_1^i$.
This shows
\beq
	L_1^i \karp L_1, \forall i.
	\label{l1star}
\eeq

Analogously, I can build a machine $M_2^*$, such that it accepts $L_2^*$ and $L_2^* \karp L_2$.

\end{proof}

\begin{problem}
Prove that if $\NP \ne \coNP$ then there is a language $L^*  \in \NP \setminus \coNP$ that is not \NP-complete. Why does our proof of Ladner's theorem not imply this?
\end{problem}

%%%%%%%%%%%%
\begin{proof}
Ladner's theorem only specifies that there are $\NP$ languages that are not $\NP$-complete.	
It does not specify if if those languages are also in $\coNP$ or not.

I will build a language $L^* \in \NP \setminus \coNP$ that is not $\NP$-complete.
The fact that $L^* \in \NP \setminus \coNP \Leftrightarrow L^* \neq \overline{L^*}$.

I will define $L^*$ as being the language $L_1$ from Problem~1. 
The language $\overline{L^*}$ can be defined by the following \tm{} $\overline{M^*}$:

\fcodebox{
\underline{$\overline {M^*}$, on input x:} \\
\> do (deterministically) for a total of $|x|$ steps: \\
\> \> for every deterministic $\P$ time \tm{} $M$ do: \\
\> \> $on := false$ \\
\> \> iterate through all strings $y$ until $[y \in \ThreeSAT] \not \Leftrightarrow [M(y) \in L_1(M_1)]$ \\
\> \> $on := true$ \\
\> if $on$ then run $co\NP$ algorithm for $\overline{\ThreeSAT}$ \\
\> else return $true$
}

The language $\overline{L^*}$ defined by this machine is a complement of $L^*$.
By construction, $L^* \in \NP$ and is not $\NP$-complete.
Also $\overline{L^*} \neq L^* \Leftrightarrow L^* \in \NP \cap \coNP$.

\end{proof}

\end{document}